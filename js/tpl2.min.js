var imgdivArray=[],curScene=null,sceneindex=0;
function playPhoto(){imageIndex=-1;$("#img_viewer").css("height",$(window).height());$("#img_viewer").css("width",$(window).width());$("#div_player").append("<div id='tpl2' style='width: 100%; height: 100%; display: block;'></div>");$("#tpl2").append('<img style="width: 100%; height: 100%;position:absolute" src="http://referer-image.szwwy.com/coolphoto/img/sp2.jpg">');$("#tpl2").append('<div id="space_wrapper" style="width: 100%; height: 100%;z-index:1"></div>');$("#tpl2").append('<div id="space_imgItems_wrapper" style="width: 100%; height: 100%;"></div>');
for(var b=0;16>b;++b){var a=parseInt(Math.random()*$(window).width()),d=parseInt(400*Math.random()),c=document.createElement("div");c.className="star";c.style.left=a+"px";c.style.top=d+"px";c.style["-webkit-animation-duration"]=5*Math.random()+1+"s";$("#space_wrapper").append(c)}for(o=0;14>o;++o)b=images[o%images.length][1],a=document.createElement("div"),a.innerHTML='<div class="space_img_wrapper"><img></div>',a.style.position="absolute",a.style.zIndex=2,a.style.display="none",a.style.overflow="hidden",
a.style.background="#FFF",a.style.boxShadow=a.style.webkitBoxShadow="0 0 10px 4px #9cf",a.onclick=function(){var a=this.getElementsByTagName("img")[0];$("#img_viewer img").attr("src",a.src);$("#img_viewer").removeClass();$("#img_viewer").addClass("img_viewer_show");$("#img_viewer").css("display","block");$("#img_viewer").css("pointer-events","auto");var b=new Image;b.src=a.src;a=getImgScale(b.width,b.height,$(window).width());$("#img_viewer img").css("left",parseInt(($(window).width()-a.width)/2)+
"px");$("#img_viewer img").css("top",parseInt(($(window).height()-a.height)/2)+"px");$("#img_viewer img").css("width",a.width+"px");$("#img_viewer img").css("height",a.height+"px");$("#img_viewer img").css("position","absolute");$("#img_viewer").bind("click",function(){$("#img_viewer").removeClass();$("#img_viewer").addClass("img_viewer_hide");$("#img_viewer").css("pointer-events","none")})},a.getElementsByTagName("img")[0].src=b,$("#space_imgItems_wrapper").append(a),imgdivArray.push(a);Scenes.push(new SpaceScene1($(window).width(),
$(window).height(),getNextImg,adjustImgItem,playEnd));Scenes.push(new SpaceScene2($(window).width(),$(window).height(),getNextImg,adjustImgItem,playEnd));Scenes.push(new SpaceScene3($(window).width(),$(window).height(),getNextImg,adjustImgItem,playEnd));Scenes.push(new SpaceScene4($(window).width(),$(window).height(),getNextImg,adjustImgItem,playEnd));Scenes.push(new SpaceScene5($(window).width(),$(window).height(),getNextImg,adjustImgItem,playEnd));loadUserImages();$.when(loadingdef).done(function(){$("#wrapper_player_cover_bkgnd").css("display",
"block");setTimeout("$('#wrapper_cover').addClass('effect_fadeOut');",3E3);setTimeout(function(){window.setTimeout(function(){playEnd()},100)},3100)})}function getNextImg(){imageIndex++;imageIndex>=imgdivArray.length&&(imageIndex=0);return imgdivArray[imageIndex]}function getImageBySrc(b){for(var a in images)if(images[a][1].src==src)return images[a][1];return null}
function adjustImgItem(b,a,d){var c=b.getElementsByTagName("img")[0];b=c.src;c.src="";c.onload=function(){var b=calcImgClip(a,d,this.width,this.height);c.style.left=0-b.clipLeft+"px";c.style.top=0-b.clipTop+"px";c.style.width=b.objWidth+"px";c.style.height=b.objHeight+"px";c.style.clip="rect("+b.clipTop+"px "+Math.floor(b.clipLeft+a)+"px "+Math.floor(b.clipTop+d)+"px "+b.clipLeft+"px)"};c.src=b}
function playEnd(){null!=curScene&&(curScene.leave,null==curScene);curScene=Scenes[sceneindex];curScene.enter();sceneindex++}function SPACE_SCENE_EXTEND(b,a){b.prototype=new a;b.prototype.constructor=b}
function SpaceSceneBase(){this.effect_in=["zoomIn animateShow","zoomInDown animateShow","zoomInUp animateShow","zoomInLeft animateShow","zoomInRight animateShow"];this.effect_out=[];this.imgHeight=this.imgWidth=0;this.show_speed=3;this.hide_speed=3.5;this.curImgItems=[null,null,null,null];this.points=[]}SpaceSceneBase.prototype.params=function(b,a,d,c,f){this.canvasWidth=b;this.canvasHeight=a;this.fnGetNextImg=d;this.fnAdjustImgItem=c;this.fnPlayEnd=f};
SpaceSceneBase.prototype.onShowEnd=function(){this.leave();this.fnPlayEnd()};
SpaceSceneBase.prototype.leave=function(){for(e=0;e<this.curImgItems.length;++e){var b=parseInt(Math.random()*this.effect_out.length);this.curImgItems[e].style.animationDuration=this.hide_speed+"s";this.curImgItems[e].style.webkitAnimationDuration=this.hide_speed+"s";(function(a,b,c,f){window.setTimeout(function(){a.className=f},150*c-150*b)})(this.curImgItems[e],e,this.curImgItems.length,this.effect_out[b][e]);this.curImgItems[e]=null}};
SpaceSceneBase.prototype.enter=function(){function b(){f.onShowEnd();$(this).unbind("webkitAnimationEnd",b)}for(var a=0;a<this.curImgItems.length;++a){var d=this.points[a][1],c=this.points[a][0];this.curImgItems[a]=this.fnGetNextImg();if(0==a){var f=this;$(this.curImgItems[0]).bind("webkitAnimationEnd",b)}this.curImgItems[a].style.top=d+"px";this.curImgItems[a].style.left=c+"px";this.curImgItems[a].style.width=this.imgWidth+"px";this.curImgItems[a].style.height=this.imgHeight+"px";this.curImgItems[a].style.animationDuration=
this.curImgItems[a].style.webkitAnimationDuration=this.show_speed+"s";this.fnAdjustImgItem(this.curImgItems[a],this.imgWidth,this.imgHeight);(function(a,b,c){window.setTimeout(function(){a.style.display="block";a.className=c},50*b)})(this.curImgItems[a],a,this.effect_in[parseInt(this.effect_in.length*Math.random())])}};
function SpaceScene1(b,a,d,c,f){this.params(b,a,d,c,f);this.imgHeight=this.imgWidth=parseInt(.5*Math.min(this.canvasWidth,this.canvasHeight));this.show_speed=3;this.hide_speed=3.5;this.effect_out=[["bounceOutLeft animateHide"],["bounceOutRight animateHide"]];this.curImgItems=[null];this.points.push([parseInt((this.canvasWidth-this.imgWidth)/2),parseInt((this.canvasHeight-this.imgHeight)/2)])}
function SpaceScene2(b,a,d,c,f){this.params(b,a,d,c,f);this.imgHeight=this.imgWidth=parseInt(.45*Math.min(this.canvasWidth,this.canvasHeight));this.show_speed=3;this.hide_speed=2.5;this.effect_out=[["bounceOutUp animateHide","bounceOutDown animateHide"],["bounceOutDown animateHide","bounceOutUp animateHide"],["bounceOutRight animateHide","bounceOutLeft animateHide"]];this.curImgItems=[null,null];b=(this.canvasHeight-1.7*this.imgHeight)/2;a=(this.canvasWidth-1.7*this.imgWidth)/2;this.points=[[a,b],
[parseInt(a+.7*this.imgWidth),parseInt(b+.7*this.imgHeight)]]}
function SpaceScene3(b,a,d,c,f){this.params(b,a,d,c,f);this.imgHeight=this.imgWidth=parseInt(.35*Math.min(this.canvasWidth,this.canvasHeight));this.hide_speed=this.show_speed=2.5;this.effect_out=[["bounceOutDown animateHide","bounceOutUp animateHide","bounceOutRight animateHide","bounceOutLeft animateHide"]];this.curImgItems=[null,null,null,null];b=(this.canvasHeight-2.7*this.imgHeight)/2;a=(this.canvasWidth-this.imgWidth)/2;d=(this.canvasHeight-this.imgHeight)/2;c=(this.canvasWidth-2.7*this.imgWidth)/
2;this.points=[[a,b],[a,parseInt(b+1.7*this.imgHeight)],[c,d],[parseInt(c+1.7*this.imgWidth),d]]}
function SpaceScene4(b,a,d,c,f){this.params(b,a,d,c,f);this.imgHeight=this.imgWidth=parseInt(.3*Math.min(this.canvasWidth,this.canvasHeight));this.show_speed=3;this.hide_speed=2.5;this.effect_out=[["bounceOutDown animateHide","bounceOutLeft animateHide","bounceOutUp animateHide","bounceOutRight animateHide","rotateOut animateHide"]];this.curImgItems=[null,null,null,null,null];b=parseInt((this.canvasHeight-2.8*this.imgHeight)/2);a=parseInt((this.canvasWidth-2.8*this.imgWidth)/2);this.points=[[a,b],
[parseInt(a+1.8*this.imgWidth),b],[parseInt(a+1.8*this.imgWidth),parseInt(b+1.8*this.imgWidth)],[a,parseInt(b+1.8*this.imgWidth)],[parseInt(a+.9*this.imgWidth),parseInt(b+.9*this.imgHeight)]]}
function SpaceScene5(b,a,d,c,f){this.params(b,a,d,c,f);this.imgHeight=this.imgWidth=parseInt(.2*Math.min(this.canvasWidth,this.canvasHeight));this.show_speed=3;this.hide_speed=3.5;this.effect_out=["zoomOutDown animateHide;zoomOutLeft animateHide;zoomOutLeft animateHide;zoomOutUp animateHide;zoomOutRight animateHide;zoomOutRight animateHide;zoomOut animateHide".split(";")];this.curImgItems=[null,null,null,null,null,null,null];b=(Math.min(this.canvasWidth,this.canvasHeight)-this.imgWidth)/2;a=this.canvasWidth/
2;d=this.canvasHeight/2;for(c=0;6>c;++c){var g=60*c;f=parseInt(a+b*Math.cos((90-g)*Math.PI/180)-this.imgWidth/2);g=parseInt(d-b*Math.sin((90-g)*Math.PI/180)-this.imgHeight/2);this.points.push([f,g])}this.points.push([parseInt(a-this.imgWidth/2),parseInt(d-this.imgHeight/2)])}SPACE_SCENE_EXTEND(SpaceScene1,SpaceSceneBase);SPACE_SCENE_EXTEND(SpaceScene2,SpaceSceneBase);SPACE_SCENE_EXTEND(SpaceScene3,SpaceSceneBase);SPACE_SCENE_EXTEND(SpaceScene4,SpaceSceneBase);SPACE_SCENE_EXTEND(SpaceScene5,SpaceSceneBase);